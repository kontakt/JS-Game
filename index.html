<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Version 0.0</title>

<!-- Basic Engine --> 
<script src="js/three.js"></script>

<!-- Camera Controls --> 
<script src="js/OrbitControls.js"></script>

<!-- Stars --> 
<script src="js/Stars.js"></script>

</head>

<body>
<script>
	/* TODO
	 * 1. Build Ships js file
	 * 2. Work out sighting mechanism
	 * 3. Physics
	 * 4. Timing events
	 */

	// GLOBALS
	// Declaring basic vars
    var scene, camera, renderer;
    var line;
    
	var clock = new THREE.Clock();
  	
  	//// INITIALIZATION ////
  	// Function calls to start the program
    init();
    animate();

    function init() {
		
		//// SCENE ////
		// Create the scene
        scene = new THREE.Scene();
		
		//// CAMERA ////
		// Create the camera and set it 1000 units back
        camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 1e7 );
        camera.position.z = 1000;
        
        // Set camera controls, limiting zoom to 10000 units
		controls = new THREE.OrbitControls( camera );
		controls.damping = 0.2;
		controls.addEventListener( 'change', render );
		controls.maxDistance = 1e4;
		
		//// LIGHTS ////
		// For the sun
		var light = new THREE.PointLight( 0xff0000, 1, 0 ); 
		light.position.set( -1e5, 50, 0 ); 
		scene.add( light );
		
		//// MATERIALS ////
		var material 	= new THREE.MeshBasicMaterial( { color: 0xff0000, wireframe: true } );
        var material2 	= new THREE.MeshLambertMaterial( { color: 0xff0000 } );
        var material3 	= new THREE.LineBasicMaterial( { color: 0x0000ff } );
    
		
		//// GEOMETRIES ////
        var box			= new THREE.BoxGeometry( 10, 10, 10 );
        var box2 		= new THREE.BoxGeometry( 1, 1, 1 );
        var ball 		= new THREE.SphereGeometry( 25, 16, 16);
        var base 		= new THREE.SphereGeometry( 5000, 16, 16);
        var geometry	= new THREE.Geometry();
		
		//// SCENE ITEMS ////
		// Sun
		sun = new THREE.Mesh( base, material);
		scene.add( sun );
		sun.position.x = -1e5;		
		
		// Add the stars
		addStars();
		
		// Planet sphere
		sphere = new THREE.Mesh( ball, material2);
		scene.add(sphere);
		sphere.position.x = 10;
		sphere.position.y = 50;
		sphere.position.z = 130;
		
		// Big cube
        cube1 = new THREE.Mesh( box, material );
        scene.add( cube1 );
        cube1.position.x = -100;
		cube1.position.y = -10;
		cube1.position.z = -90;
        
        // Little cube
        cube2 = new THREE.Mesh( box2, material );
        scene.add( cube2 );
        cube2.position.x = 100;
		cube2.position.y = 30;
		cube2.position.z = 70;
		
		// Line between cubes
		geometry.vertices.push(new THREE.Vector3(-100, -10, -90));
    	geometry.vertices.push(new THREE.Vector3(100, 30, 70));
    	line = new THREE.Line(geometry, material2);
    	scene.add(line);
		
		//// RENDERER ////
		// Creates the render object, WebGL with antialiasing
        renderer = new THREE.WebGLRenderer({antialias:true});
        renderer.setSize( (window.innerWidth-25), (window.innerHeight-25) );
        
        // Add the renderer to the HTML 
        document.body.appendChild( renderer.domElement );
        
        //// LISTENERS ////
        // Dynamic window resizing
        window.addEventListener( 'resize', onWindowResize, false );

        
    }
    

    // All actions involving a visual change occur here
    function animate() {
		
		// Looping animation
        requestAnimationFrame( animate );
		
		// Give the planet some spin
        sphere.rotation.y += 0.001;     
        
        // Deletes line between cubes
        scene.remove( line );
		
		// Render the scene
        render();
        
    }
    
    // Renders the scene after animate() is through
    function render() {
    	
    	renderer.render( scene, camera );
    }
	
	// Dynamically resizes the window based on current dimensions
	function onWindowResize() {

	    camera.aspect = window.innerWidth / window.innerHeight;
	    camera.updateProjectionMatrix();
	
	    renderer.setSize( (window.innerWidth-25), (window.innerHeight-25) );
	}
</script>

</body>


</html>